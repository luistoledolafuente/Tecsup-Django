{% extends "base.html" %}

{% block title %}Exámenes{% endblock %}

{% block content %}
<div class="row align-items-center mb-4">
    <div class="col-md-6">
        <h2 class="fw-bold text-primary">Exámenes Disponibles</h2>
    </div>
    <div class="col-md-6 text-end">
        <a href="{% url 'exam_create' %}" class="btn btn-primary">Crear Examen</a>
        <a href="{% url 'stats_dashboard' %}" class="btn btn-info ms-2">Ver Estadísticas</a>
    </div>
</div>

<form method="get" class="mb-4">
    <div class="row">
        <div class="col-md-4">
            <select name="category" class="form-select" onchange="this.form.submit()">
                <option value="">Todas las categorías</option>
                {% for category in categories %}
                <option value="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
</form>

<div class="row">
    {% if exams %}
        {% for exam in exams %}
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ exam.title }}</h5>
                    <p class="card-text">{{ exam.description|truncatechars:100 }}</p>
                    <p class="text-muted">Preguntas: {{ exam.get_question_count }}</p>
                    <div class="mt-auto">
                        <a href="{% url 'exam_detail' exam.id %}" class="btn btn-primary">Ver Detalles</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
    <div class="col-12">
        <div class="alert alert-info text-center">
            No hay exámenes disponibles.
            <a href="{% url 'exam_create' %}" class="alert-link">Crea el primero</a>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
